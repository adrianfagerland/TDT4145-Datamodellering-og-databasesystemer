import time
import curses
import threading


def train_animation(stdscr: curses.window, stop_event: threading.Event, screen_lock: threading.Lock):
    counter = 0
    next_update_time = time.time()
    while not stop_event.is_set():
        current_time = time.time()
        if current_time >= next_update_time:
            with screen_lock:
                update_train(stdscr, counter)
                counter += 1
            next_update_time = current_time + 0.06


def update_train(stdscr: curses.window, counter):
    train_animation = ["""                     (@@) (  ) (@)  ( )  @@    ()    @
                (   )
            (@@@@)
         (    )

       (@@@)
      ====        ________                ___________
  _D _|  |_______/        \__I_I_____===__|_________|
   |(_)---  |   H\________/ |   |        =|___ ___|
   /     |  |   H  |  |     |   |         ||_| |_||
  |      |  |   H  |__--------------------| [___] |
  | ________|___H__/__|_____/[][]~\_______|       |
  |/ |   |-----------I_____I [][] []  D   |=======|
__/ =| o |=-~~\  /~~\  /~~\  /~~\ ____Y___________|
 |/-=|___|=    ||    ||    ||    |_____/~\___/     
  \_/      \O=====O=====O=====O_/      \_/         """.splitlines(), """                     (@@) (  ) (@)  ( )  @@    ()    @
                (   )
            (@@@@)
         (    )

       (@@@)
      ====        ________                ___________
  _D _|  |_______/        \__I_I_____===__|_________|
   |(_)---  |   H\________/ |   |        =|___ ___|
   /     |  |   H  |  |     |   |         ||_| |_||
  |      |  |   H  |__--------------------| [___] |
  | ________|___H__/__|_____/[][]~\_______|       |
  |/ |   |-----------I_____I [][] []  D   |=======|
__/ =| o |=-~~\  /~~\  /~~\  /~~\ ____Y___________|
 |/-=|___|=    ||    ||    ||    |_____/~\___/     
  \_/      \_O=====O=====O=====O/      \_/         """.splitlines(), """                     (@@) (  ) (@)  ( )  @@    ()    @
                (   )
            (@@@@)
         (    )

       (@@@)
      ====        ________                ___________
  _D _|  |_______/        \__I_I_____===__|_________|
   |(_)---  |   H\________/ |   |        =|___ ___|
   /     |  |   H  |  |     |   |         ||_| |_||
  |      |  |   H  |__--------------------| [___] |
  | ________|___H__/__|_____/[][]~\_______|       |
  |/ |   |-----------I_____I [][] []  D   |=======|
__/ =| o |=-~~\  /~~\  /~~\  /~~\ ____Y___________|
 |/-=|___|=   O=====O=====O=====O|_____/~\___/     
  \_/      \__/  \__/  \__/  \__/      \_/         """.splitlines(), """                     (  ) (@@) ( )  (@)  ()    @@    O
                (@@@)
            (    )
         (@@@@)

       (   )
      ====        ________                ___________
  _D _|  |_______/        \__I_I_____===__|_________|
   |(_)---  |   H\________/ |   |        =|___ ___|
   /     |  |   H  |  |     |   |         ||_| |_||
  |      |  |   H  |__--------------------| [___] |
  | ________|___H__/__|_____/[][]~\_______|       |
  |/ |   |-----------I_____I [][] []  D   |=======|
__/ =| o |=-~O=====O=====O=====O\ ____Y___________|
 |/-=|___|=    ||    ||    ||    |_____/~\___/     
  \_/      \__/  \__/  \__/  \__/      \_/         """.splitlines(), """                     (  ) (@@) ( )  (@)  ()    @@    O
                (@@@)
            (    )
         (@@@@)

       (   )
      ====        ________                ___________
  _D _|  |_______/        \__I_I_____===__|_________|
   |(_)---  |   H\________/ |   |        =|___ ___|
   /     |  |   H  |  |     |   |         ||_| |_||
  |      |  |   H  |__--------------------| [___] |
  | ________|___H__/__|_____/[][]~\_______|       |
  |/ |   |-----------I_____I [][] []  D   |=======|
__/ =| o |=-O=====O=====O=====O \ ____Y___________|
 |/-=|___|=    ||    ||    ||    |_____/~\___/     
  \_/      \__/  \__/  \__/  \__/      \_/         """.splitlines(), """                     (  ) (@@) ( )  (@)  ()    @@    O
                (@@@)
            (    )
         (@@@@)

       (   )
      ====        ________                ___________
  _D _|  |_______/        \__I_I_____===__|_________|
   |(_)---  |   H\________/ |   |        =|___ ___|
   /     |  |   H  |  |     |   |         ||_| |_||
  |      |  |   H  |__--------------------| [___] |
  | ________|___H__/__|_____/[][]~\_______|       |
  |/ |   |-----------I_____I [][] []  D   |=======|
__/ =| o |=-~~\  /~~\  /~~\  /~~\ ____Y___________|
 |/-=|___|=O=====O=====O=====O   |_____/~\___/     
  \_/      \__/  \__/  \__/  \__/      \_/         """.splitlines()]

    for index, line in enumerate(train_animation[counter % len(train_animation)]):
        stdscr.addstr(index, 61, line)
    stdscr.refresh()
